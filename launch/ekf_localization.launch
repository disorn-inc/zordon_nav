<?xml version="1.0"?>
<launch>
<arg name="robot_name"/>
<arg name="odom_topic" default="$(arg robot_name)/odom_filtered" />
<node pkg="robot_localization" type="ekf_localization_node" name="ekf_odom">
	<param name="sensor_timeout" value="0.1"/>
	<param name="frequency" value="50"/>
	<param name="two_d_mode" type="bool" value="true"/>e
	<param name="imu0_remove_gravitational_acceleration" value="true"/>

	<param name="odom1" value= "$(arg robot_name)/Zed/odom"/>
    	<param name="odom0" value= "$(arg robot_name)/wheels_odom"/>
    	<param name="imu0" value= "$(arg robot_name)/imu"/>
    	<remap from="odometry/filtered" to="$(arg odom_topic)"/>
    	<remap from="accel/filtered" to="$(arg robot_name)/accel_filtered"/>

    	<param name="odom_frame" value= "$(arg robot_name)_odom"/>
    	<param name="base_link_frame" value= "$(arg robot_name)_base"/>
    	<param name="world_frame" value= "$(arg robot_name)_odom"/>
    	<param name="map_frame" value= "map"/>
        <rosparam param="imu0_config"> [false, false, false,   <!-- x,y,z -->
                                       true, true, true,      <!-- roll, pitch, yaw -->
                                       false, false, false,   <!-- x,y,z velocities -->
                                       true, true, true,   <!-- roll, pitch , yaw velocity -->
                                       true, true, true ] <!-- x,y,z acceleration -->
        </rosparam>
        <rosparam param="odom0_config">[true, true, false, <!-- x,y,z -->
                                       false, false, true, <!-- roll, pitch, yaw -->
                                       false, false, false,  <!-- x,y,z velocities -->
                                       false, false, true,  <!-- roll, pitch , yaw velocity -->
                                       false, false, false ] <!-- x,y,z acceleration -->
        </rosparam>
        <rosparam param="odom1_config">[false, false, false,    <!-- x,y,z -->
                                       false, false, false,    <!-- roll, pitch, yaw -->
                                       false, false, false,   <!-- x,y,z velocities -->
                                       false, false, false,   <!-- roll, pitch , yaw velocity -->
                                       false, false, false ]  <!-- x,y,z acceleration -->
        </rosparam>
        <param name="odom0_differential" value="false"/>
	<param name="odom1_differential" value="false"/>        
	<param name="imu0_differential" value="false"/>
	<param name="odom0_queue_size" value="20"/> 
	<param name="odom1_queue_size" value="20"/>
  	<param name="imu0_queue_size" value="20"/>
	<param name="print_diagnostics" value="true"/>
	
	<!--<param name="use_control" value="true"/>
	<param name="odom1_pose_rejection_threshold" value="5"/>
  	<param name="odom1_twist_rejection_threshold" value="0.5"/>
	<param name="odom0_pose_rejection_threshold" value="0.01"/>
  	<param name="odom0_twist_rejection_threshold" value="0"/>
	<param name="odom1_pose_rejection_threshold" value="0.01"/>
  	<param name="odom1_twist_rejection_threshold" value="0"/>
  	<param name="imu0_pose_rejection_threshold" value="0.05"/>
  	<param name="imu0_twist_rejection_threshold" value="0"/>
 	<param name="imu0_linear_acceleration_rejection_threshold" value="0.1"/>-->
    </node>
</launch>
